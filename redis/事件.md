# 事件

## 文件事件

文件事件处理器基于Reactor模式实现的网络通信程序。
文件事件是对套接字操作的抽象：每次套接字变为可应答（acceptable）、可写（writable）、或者可读（readable）时，相应的文件事件就会产生。

## 时间事件

- id: 服务器未时间事件创建的全局唯一ID
- when: 毫秒精度的UNIX时间戳，记录了时间事件的到达时间
- timeProc： 时间事件处理器，一个函数。当时间时间到达时，服务器就调用相应的处理器来处理事件 

### 定时事件

让一段程序在指定的时间之后执行一次

### 周期性事件

让一段程序每隔指定时间就执行一次

### serverCron

- 更新服务器的各类统计信息，比如时间、内存占用、数据库占用情况
- 清理数据库中的过期键值对
- 关闭和清理连接失效的客户端
- 尝试进行AOF或者RDB持久化操作
- 如果服务器是主服务器啊，定期同步
- 如果处于集群模式，对集群进行定期同步和连接测试。

## 总结

- 文件事件和时间事件之间时合作关系，服务器会轮流处理这两种事件，并且处理事件的过程中也不会进行抢占。
- 时间事件的实际处理实际通常回避设定的到达时间晚一些。
