## 消息队列的特点
1. 解耦
2. 最终一致性： 记录和补偿的方式
3. 广播
4. 错峰与流控

## 实现队列基本功能
1. RPC通信协议：依赖现有rpc框架
2. 高可用：mq保证处理消息幂等（共享存储等方式），将MQ的高可用转嫁为rpc的高可用
3. 服务端承载消息堆积的能力：存储（持久化和非持久化）
4. 存储子系统的选择
5. 消费关系解析：发送关系的维护、发送关系变更时端通知


## 分布式事务的实现
- 2PC（Two-phase Commit，二阶段提交）
- TCC（Try-Confirm-Cancel）
- 事务消息
    - 适用场景： 需要异步更新数据，并且对数据实时性要求不太高的场景