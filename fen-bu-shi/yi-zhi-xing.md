# 一致性

## 线性一致性

## 顺序一致性

## 因果一致性

## 拜占庭将军问题

一个主将发送命令给n-1个副官，如何才能确保下面两个条件

* 所有忠诚的副官最终都接受相同的命令
* 如果主将是忠诚的，那么所有忠诚的副官都接受主将发出的命令

## 解法

如果将军之间使用口头消息，也就是说，消息被转述的时候是可能被篡改的，那么要对付m个叛徒，需要至少3m+1个将军（其中至少2m+1个将军是忠诚的） 如果将军之间使用签名消息，也就是说，消息被发出来之后是无法伪造的，只要篡改就会被发现，那么对付m个叛徒，只需要至少m+2个将军，也就是说至少2个忠诚的将军。

以Paxos为代表的分布式一致性协议，是在可信任的环境下运行的。而拜占庭将军问题中，网络中可能存在恶意节点。

* 拜占庭错误
  * 叛徒的恶意行为
  * 出现故障的节点或部件
* 非拜占庭错误

解决拜占庭将军问题的算法，提供了最强的容错性，即BFT（拜占庭容错），而Paxos只能容忍非拜占庭错误

从计数角度来说，区块链是解决了拜占庭将军问题的分布式网络。

